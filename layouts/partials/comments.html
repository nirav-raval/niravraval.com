<script>
  // Set the initial theme based on localStorage or default to "light"
  let theme = localStorage.getItem("theme") || "light";

  // Apply the theme dynamically to the page
  document.documentElement.setAttribute("data-theme", theme);

  // Update the Giscus theme dynamically
  function updateGiscusTheme(newTheme) {
    const giscusFrame = document.querySelector("iframe.giscus-frame");
    if (giscusFrame) {
      giscusFrame.contentWindow.postMessage(
        { giscus: { setConfig: { theme: newTheme } } },
        "https://giscus.app"
      );
    }
  }

  // Get the theme toggle button
  const themeToggleButton = document.getElementById("theme-toggle");

  // Add a click event listener to toggle the theme
  themeToggleButton.addEventListener("click", function () {
    theme = theme === "light" ? "dark" : "light";
    document.documentElement.setAttribute("data-theme", theme);

    localStorage.setItem("theme", theme);

    updateGiscusTheme(theme);
  });
</script>

<!-- Giscus Script -->
<script
  src="https://giscus.app/client.js"
  data-repo="nirav-raval/niravraval.com"
  data-repo-id="R_kgDONXDdoA"
  data-category="Post Comments"
  data-category-id="DIC_kwDONXDdoM4CllZe"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="light"
  data-lang="en"
  crossorigin="anonymous"
  async
></script>
