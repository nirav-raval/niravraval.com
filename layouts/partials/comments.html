<script>
  function updateGiscusTheme() {
    const isDark = document.documentElement.getAttribute("data-theme") === "dark";
    const giscusTheme = isDark ? "dark" : "light";
    const giscusFrame = document.querySelector("iframe.giscus-frame");
    if (giscusFrame) {
      giscusFrame.contentWindow.postMessage(
        { giscus: { setConfig: { theme: giscusTheme } } },
        "https://giscus.app"
      );
    }
  }

  // Observe the 'data-theme' attribute on the HTML tag
  // This correctly integrates with PaperMod's built-in theme toggle
  const observer = new MutationObserver(function() {
    updateGiscusTheme();
  });
  
  observer.observe(document.documentElement, {
    attributes: true,
    attributeFilter: ["data-theme"]
  });
</script>

<!-- Giscus Script -->
<script
  src="https://giscus.app/client.js"
  data-repo="nirav-raval/niravraval.com"
  data-repo-id="R_kgDONXDdoA"
  data-category="Post Comments"
  data-category-id="DIC_kwDONXDdoM4CllZe"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="bottom"
  data-theme="light"
  data-lang="en"
  crossorigin="anonymous"
  async
></script>
